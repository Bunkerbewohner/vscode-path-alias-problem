# VSCode path alias import bug

This repository demonstrates a bug in VSCode where moving a folder that's imported using a path alias does not update the import paths.

This seems to be related to the option `typescript.tsserver.experimental.useVsCodeWatcher`, because
the bug can only be reproduced what that option is enabled.

# Prerequisites

- VSCode

# Test scenarios

Using VSCode with the option `typescript.tsserver.experimental.useVsCodeWatcher` enabled.
Given `index.ts` which imports the `components/whatever/alert` function using the path alias `@app`:

```ts
import { alert } from '@app/components/whatever/alert';
```

## Bug: Moving a folder that's imported from using path-aliased should update imports

Moving the folder `components/whatever` to a different folder should automatically update the import in `index.ts`.

### Steps to reproduce:

1. Move `components/whatever` to `functions/whatever` using VSCode's file explorer (i.e. via drag & drop).

### Expected behavior:

The import in `index.ts` should be updated to:

```ts
import { alert } from '@app/functions/whatever/alert';
```

### Actual behavior:

The import in `index.ts` is not updated, and thus becomes invalid.
At least while `typescript.tsserver.experimental.useVsCodeWatcher` is enabled.

Disabling `typescript.tsserver.experimental.useVsCodeWatcher` leads to the expected behavior.

## Works: Directly moving a file that's imported via path alias should update imports

Directly moving a file that's imported via a path alias should automatically update the import in `index.ts`.

### Steps to reproduce:

1. Move `components/whatever/alert.ts` to `functions/whatever/alert.ts` using VSCode's file explorer (i.e. via drag & drop).

### Expected & actual behavior:

The import in `index.ts` should be updated to:

```ts
import { alert } from '@app/functions/whatever/alert';
```

# Test Environment

The test scenarios above were reproduced in the following environment(s):

## OS

- macOS Sonoma 14.4.1

## VSCode

Using VSCode with the option `typescript.tsserver.experimental.useVsCodeWatcher` enabled.

### VSCode 1.92.0

```
Version: 1.92.0 (Universal)
Commit: b1c0a14de1414fcdaa400695b4db1c0799bc3124
Date: 2024-07-31T23:26:45.634Z
Electron: 30.1.2
ElectronBuildId: 9870757
Chromium: 124.0.6367.243
Node.js: 20.14.0
V8: 12.4.254.20-electron.0
OS: Darwin arm64 23.4.0
```

## TypeScript

Using the default `tsconfig.json` generated by `tsc --init`.

### Versions

These are the versions that the bug was reproduced in:

- `next-5.6.20240811`
- `5.5.4`

# Links

* https://github.com/microsoft/TypeScript/issues/59603
